<html>
  <body>
    <form>
      <input type="text" name="module" placeholder="request">
      <input type="submit" >
    </form>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js" type="text/javascript"></script>
    <script type="text/sandbox" id="myapp">
      return function(context, cb) {
          try {
            require.resolve(context.data.module);
            cb(null, 'yes');
          } catch(e) {
            cb(null, 'nope.');
          }
      }
    </script>
    <script type="text/javascript">
      var form = document.getElementsByTagName('form')[0];

      form.addEventListener('submit', function(e) {
        // e.preventDefault();
        // var module_name = document.getElementsByName('module')[0].value;
        // $.ajax({
        //   url: 'https://webtask.it.auth0.com/api/run/wt-tehsis-gmail_com-1?module=' + module_name,
        //   method: 'POST',
        //   data: "      return function(context, cb) {\n          try {\n            require.resolve(context.data.module);\n            cb(null, 'yes');\n          } catch(e) {\n            cb(null, 'nope.');\n          }\n      }",
        //   headers: {
        //     Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6IjIifQ.eyJqdGkiOiJkNDdkM2IzNGQyYjc0YTBkOWNjODA5ODc4ZDcxZDhjZCIsImlhdCI6MTQzMDAwMTg2MCwiY2EiOltdLCJkZCI6MSwidGVuIjoiL153dC10ZWhzaXMtZ21haWxfY29tLVswLTFdJC8ifQ.IUE2hx2O6lks1KpTrHpqFANPBqijr_uvWX_r-CcNj_E'
        //   },
        //   dataType: 'text',
        //   }).done(function (data) {
        //   alert(data);
        //   }).fail(function (xhr, status, error) {
        //   alert(error);
        //   });

        e.preventDefault();
        var module_name = document.getElementsByName('module')[0].value;
        var xhr = new XMLHttpRequest();

        xhr.onload = function() {
          alert(this.responseText);
        }

        xhr.open('POST', `https://webtask.it.auth0.com/api/logs/tenant/wt-tehsis-gmail_com-1?module=${module_name}`);
        xhr.setRequestHeader('Authorization', 'Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6IjIifQ.eyJqdGkiOiJkNDdkM2IzNGQyYjc0YTBkOWNjODA5ODc4ZDcxZDhjZCIsImlhdCI6MTQzMDAwMTg2MCwiY2EiOltdLCJkZCI6MSwidGVuIjoiL153dC10ZWhzaXMtZ21haWxfY29tLVswLTFdJC8ifQ.IUE2hx2O6lks1KpTrHpqFANPBqijr_uvWX_r-CcNj_E');
        xhr.setRequestHeader('Accept', 'text/plain, */*; q=0.01');
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
        xhr.send("return function(context, cb) {\n          try {\n            require.resolve(context.data.module);\n            cb(null, 'yes');\n          } catch(e) {\n            cb(null, 'nope.');\n          }\n      }");

          // fetch(``,
          // {
          //   method: 'POST',
          //   headers: {
          //     Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6IjIifQ.eyJqdGkiOiJkNDdkM2IzNGQyYjc0YTBkOWNjODA5ODc4ZDcxZDhjZCIsImlhdCI6MTQzMDAwMTg2MCwiY2EiOltdLCJkZCI6MSwidGVuIjoiL153dC10ZWhzaXMtZ21haWxfY29tLVswLTFdJC8ifQ.IUE2hx2O6lks1KpTrHpqFANPBqijr_uvWX_r-CcNj_E'
          //   },
          //   body: document.getElementById('myapp').innerText
          // })

      });
    </script>
  </body>
</html>
